# CPU Scheduling Algorithms in Operating Systems

CPU 스케줄링이란 다른 프로세스가 실행을 보류하는 동안 CPU를 점유할 프로세스를 결정하는 것이다. CPU 스케줄링의 주요 작업은 CPU가 유휴(idle) 상태일때마다 운영체제가 실행을 위해 ready 큐에서 실행 가능한 프로세스 중 하나를 선택하도록 하는 것이다.

<br>

### Important CPU scheduling Terminologies

CPU 스케줄링과 관련한 중요 개념 및 용어들은 다음과 같다.

- 버스트 시간 / 실행 시간(burst / execution time) : 프로세스가 실행을 완료하기까지 필요한 시간이며 실행 시간이라고도 한다.
- 도착 시간 : 프로세스가 준비 상태에 들어가는 시간
- 완료 시간 : 프로세스가 완료되고 시스템으로부터 종료되는 시간
- 다중 프로그래밍 : 동시에 메모리에 존재할 수 있는 프로그램의 수
- jobs : 사용자 인터랙션이 없는 프로그램 종류
- 프로세스 : job과 사용자에게 사용되는 참조
- CPU/IO 버스트 사이클(CPU/IO burst cycle) : CPU와 입출력 작업을 번갈아가며 실행하는 과정이다. CPU를 사용할 때를 CPU 버스트 시간, 입출력을 기다릴 때를 I/O 버스트 시간이라고 하며 일반적으로 CPU 버스트 시간이 I/O 버스트 시간보다 길다.

<br>

## Types of CPU Scheduling

![](https://cdn.guru99.com/images/1/122519_0449_CPUscheduli1.png)

CPU 스케줄링에는 선점형(preemptive) 스케줄링과 비선점형(non-preemptive) 스케줄링이 있다.

<br>

### Preemptive Scheduling

선점형 스케줄링에서의 작업들은 우선순위와 함께 할당된다. 우선순위가 높은 프로세스가 현재 실행중인 프로세스를 중단시키고 CPU를 점유한다. 이 경우 낮은 우선순위의 프로세스의 실행이 일정 시간 동안 보류되고 높은 우선순위의 프로세스가 종료되면 다시 낮은 우선순위의 프로세스 실행이 시작된다.

선점형 스케줄링에서는 타이머가 사용된다. 특정 프로세스가 CPU에 할당되면 타이머가 지정된 간격으로 설정되어 프로세스가 CPU 버스트가 완료되기 전 프로세스가 CPU에 반납하도록 강제해 프로세스 종료되지않고 시스템에서 무한히 실행되는 것을 방지한다.

<br>

### Non-Preemptive Scheduling

비선졈형 스케줄링에서는 CPU에 특정 프로세스가 할당되면 프로세스가 종료되고 반환될 때까지 다른 프로세스의 CPU 점유가 불가하다. 선점형 스케줄링는 타이머와 같은 특정 하드웨어가 필요하지만 비선점형 스케줄링은 그렇지 않기 대문에 다양한 하드웨어들에서 사용된다.

<br>

### When scheduling is Preemptive or NonPreemptive?

스케줄링이 선점형 스케줄링인지 혹은 비선점형 스케줄링인지 확인하기 위해선 다음과 같은 4가지 조건을 확인해야한다.

1. 프로세스가 실행 상태에서 대기 상태로 전환된다.
2. 특정 프로세스가 실행 상태에서 준비(ready) 상태로 전환된다.
3. 특정 프로세스가 대기 상태에서 준비 상태로 전환된다.
4. 프로세스가 실행을 마치고 종료된다.

1번과 4번에 해당할 경우 해당 스케줄링은 비선점형 스케줄링이며, 2,3번에 해당할 경우 선점형 스케줄링이다.

<br>

## CPU Scheduling Criteria

![](https://cdn.guru99.com/images/1/122519_0449_CPUscheduli2.png)

CPU 스케줄링은 CPU 사용률과 처리량을 최대화시키며 반환 시간, 대기 시간, 응답 시간을 최소화 시킨다.

<br>

### Maximize:

- CPU 사용률(CPU utilization) : CPU 사용률을 높이는 작업은 운영체제의 주요 작업 중 하나이다. 사용률은 0에서 100%까지이며 하위 수준 시스템의 경우 40%, 상위 수준 시스템의 경우 90%의 범위를 갖는다.
- 처리량 : 단위 시간당 실행을 완료하는 프로세스의 수를 처리량이라고 한다.

<br>

### Minimize:

- 대기 시간 : 프로세스가 ready 큐에서 기다리는 시간이다.
- 응답 시간 : 첫 응답이 만들어질때 까지 걸리는 시간이다.
- 반환 시간 : 프로세스를 실행하는데 걸리는 시간이다. 메모리에 할당되기 위해 대기, 큐에서의 대기, CPU에서 실행되는데에 소요된 총 시간을 계산한다.

<br>

## What is Dispatcher?

디스패처(dispatcher)란 CPU의 제어권을 선택된 프로세스에 제공하는 모듈이다. 디스패치 지연(dispatch latency)이란 CPU가 프로세스를 종류하고 다른 프로세스 실행을 시작하는데 필요한 시간을 의미한다.

디스패처는 다음과 같은 작업을 수행한다.

- 컨텍스트를 전환한다.
- 운영체제 모드에서 사용자 모드로 전환한다.
- 새롭게 로드된 프로그램이 올바른 위치를 찾을 수 있도록 한다.

<br>

## Types of CPU scheduling Algorithm

스케줄링 알고리즘을 사용하는 목적은 다음과 같다.

- 스케줄링을 사용해 CPU 효율성을 높인다.
- 경쟁 상태인 프로세스간에 리소스를 할당하는데 도움이 된다.
- 멀티프로그래밍으로 CPU 최대 사용률을 얻을 수 있다.
- 실행되어질 프로세스를 ready 큐에 위치시킨다.

<br>

CPU 스케줄링 알고리즘은 아래와 같은 6가지 종류가 있다.

- FCFS(First Come First Serve) Scheduling
- Shortest Remaining Time(SRT) Scheduling
- Priority Scheduling
- Round Robin Scheduling
- Shortest-Job-First (SJF) Scheduling
- Multilevel Queue Scheduling

<br>

### Firt Come First Serve Scheduling

FCFS 스케줄링은 먼저 CPU 사용을 요청한 프로세스에게 먼저 CPU를 할당해주는 방식이다. 가장 쉽고 간단한 CPU 스케줄링 알고리즘이며 선입선출 구조의 큐를 통해 관리할 수 있다.

프로세스가 ready 큐에 들어가면 프로세스 제어 블록(PCB)은 큐의 꼬리와 연결된다. CPU가 사용 가능한 상태가 되면 큐의 시작 부분에 있는 프로세스를 할당한다.

FCFS 스케줄링의 특징은 다음과 같다.

- 선점형 및 비선점형 스케줄링 알고리즘을 제공한다.
- 항상 선착순으로 실행된다.
- 구현 및 사용이 쉽다.
- 성능상 좋은 효율을 보여주지는 못하며 대기시간이 매우 길다.

<br>

### Shortest Remaining Time Scheduling

SRT 스케줄링은 선점형 SJF 스케줄링이라고도 부르며 완료까지 최단시간을 가진 프로세스에 작업을 할당하는 방식이다. 

SRT 스케줄링의 특징은 다음과 같다.

- 주로 짧은 작업이 우선시되어야하는 일괄 처리 환경에서 적용된다.
- 필요한 CPU 시간을 알 수 없는 공유 시스템에서의 구현은 지양해야한다.
- 다음 CPU 버스트의 길이로 각 프로세스와 연결한다.

<br>

### Priority Based Scheduling

우선순위 스케줄링은 우선순위에 따라 프로세스를 할당하는 방식이다. 우선순위가 높은 프로세스가 먼저 실행되며 만약 우선순위가 같은 작업들이 존재하면 라운드 로빈 스케줄링 또는 FCFS 스케줄링으로 실행된다. 우선순위는 메모리 요구사항, 필요 시간에 따라 결정된다.

<br>

### Round Robin Scheduling

라운드 로빈 스케줄링은 우선순위를 두지 않고 순서대로 시간 단위로 CPU를 할당하는 방식(def by wikipedia)이며 가장 오래되고 간단한 스케줄링 알고리즘이다. 멀티태스킹 스케줄링 알고리즘에서 사용된다. 라운드 로빈 스케줄링 알고리즘은 starvation free 실행에 도움을 준다.

라운드 로빈 스케줄링의 특징은 다음과 같다.

- 프로세스마다 다를 수 있지만 시간 단위는 처리할 작업에 할당되는 최소값이어야한다.
- 시간 제한내에 이벤트에 응답하는 실시간 시스템이다.

<br>

### Shortest Job First Scheduling

SJF 스케줄링은 실행 시간 즉, CPU 점유시간이 가장 짧은 프로세스를 먼저 할당하는 방식이다. 선점형과 비선점형 모두 적용되는 알고리즘이며 실행을 기다리는 프로세스들의 대기시간을 크게 줄일수 있다.

SJF 스케줄링의 특징은 다음과 같다.

- 완료하는 시간 단위로 각 작업이 연결된다.
- CPU가 사용 가능한 경우, 완료 시간이 가장 짧은 프로세스가 실행된다.
- 일괄처리 방식과 같이 작업 완료 대기 시간이 중요하지않은 처리에 유용하다.

<br>

### Multilevel Queue Scheduling

다중 레벨 큐 스케줄링은 우선순위, 메모리 크기 등 프로세스의 속성을 기반으로 프로세스를 큐에 할당한다. 스케줄링 시 다른 유형의 알고리즘이 필요하기 때문에 독립적인 스케줄링 운영체제 알고리즘은 아니다.

다중 레벨 큐 스케줄링의 특징은 다음과 같다.

- 프로세스 속성에 따라 여러 큐를 유지해야한다.
- 큐마다 별도의 특정 알고리즘이 있을 수 있다.
- 각 대기열에 우선순위가 부여된다.

<br>

<br>

------

##### Reference

- [CPU Scheduling Algorithms in Operating Systems](https://www.guru99.com/cpu-scheduling-algorithms.html)

